# eval $(guix time-machine --commit=38ef37d4bb684849e1789d57e46a039e6d005579 -- shell racket@8.7 --search-paths)
use_guix racket@8.7
raco pkg install --auto --skip-installed megaparsack-lib threading pvector cover ansi-color
export_alias t "# run all tests" "raco test -y -t -x -j 8 ."
export_alias m "# make all rkt files" "raco make -v -j 8 \$(find \${DIRENV_DIR:1}/src -type d -not -name 'compiled' -printf '%p/*.rkt ' | tr '\n' ' ')"
export_alias b "# make and test all rkt files"  "m && t"
export_alias c "# clean previous build artifacts" "find \"\${DIRENV_DIR:1}\" \( -name '*.zo' -or -name '*.dep' \) -exec rm {} \;  || echo -n; echo \"cleaned.\""
export_alias cov "# get coverage" "raco cover \$(find \${DIRENV_DIR:1}/src -type d -not \( -wholename '*/example*' -or -wholename '*/compiled*' -or -wholename '*/.direnv*' -or -wholename '*/compiled*' -or -wholename '*/auto*' -or -wholename '*/coverage*' \) -printf '%p/*.rkt ' | tr '\n' ' ')"
export_alias bb "# clean, make and test rkt files"  "c && m && t"
export_alias pp "# print vars" "echo \"project root: \${DIRENV_DIR:1}\""
